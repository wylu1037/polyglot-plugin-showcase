{
  "examples": [
    {
      "scenario": "场景1: 正在运行的数据脱敏插件",
      "description": "这是你已经实现的 desensitization 插件,已启用并正在运行中",
      "data": {
        "id": 1,
        "name": "desensitization-plugin",
        "display_name": "数据脱敏插件",
        "description": "提供手机号、身份证号、邮箱等敏感数据的脱敏处理功能",
        "version": "1.0.0",
        "author": "wylu",
        "type": "desensitization",
        "protocol": "grpc",
        "binary_path": "/Users/wenyanglu/Workspace/github/polyglot-plugin-showcase/host-server/bin/plugins/desensitization",
        "checksum": "a3f5d8c9e2b4f1a7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1",
        "file_size": 8388608,
        "status": "active",
        "enabled": true,
        "auto_start": true,
        "process_id": 12345,
        "last_start_at": "2025-11-11T10:30:00Z",
        "last_stop_at": "2025-11-10T18:00:00Z",
        "restart_count": 2,
        "error_message": "",
        "config": {
          "port": 50051,
          "timeout": 30,
          "max_connections": 100
        },
        "capabilities": {
          "phone": true,
          "id_card": true,
          "email": true,
          "bank_card": true
        },
        "metadata": {
          "language": "go",
          "min_go_version": "1.21"
        },
        "protocol_version": 1,
        "handshake_cookie": "desensitization-cookie-abc123",
        "total_calls": 15234,
        "failed_calls": 12,
        "avg_response_ms": 8.5,
        "last_call_at": "2025-11-11T14:25:30Z",
        "dependencies": [],
        "tags": ["security", "data-protection", "privacy"],
        "install_source": "local",
        "install_at": "2025-11-10T09:00:00Z",
        "installed_by": "admin",
        "created_at": "2025-11-10T09:00:00Z",
        "updated_at": "2025-11-11T10:30:00Z"
      }
    },
    {
      "scenario": "场景2: 已安装但未启用的加密插件",
      "description": "插件已安装,但用户选择暂时不启用",
      "data": {
        "id": 2,
        "name": "aes-encryption-plugin",
        "display_name": "AES 加密插件",
        "description": "提供 AES-256 加密和解密功能,支持 CBC/GCM 多种模式",
        "version": "2.1.3",
        "author": "security-team",
        "type": "encryption",
        "protocol": "grpc",
        "binary_path": "/opt/plugins/aes-encryption",
        "checksum": "b4e6d9c0f3a5e2b1c8d0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2",
        "file_size": 6291456,
        "status": "inactive",
        "enabled": false,
        "auto_start": false,
        "process_id": null,
        "last_start_at": null,
        "last_stop_at": null,
        "restart_count": 0,
        "error_message": "",
        "config": {
          "algorithm": "AES-256-GCM",
          "key_size": 256
        },
        "capabilities": {
          "encrypt": true,
          "decrypt": true,
          "modes": ["CBC", "GCM", "CTR"]
        },
        "metadata": {
          "license": "MIT",
          "homepage": "https://github.com/example/aes-plugin"
        },
        "protocol_version": 1,
        "handshake_cookie": "",
        "total_calls": 0,
        "failed_calls": 0,
        "avg_response_ms": 0,
        "last_call_at": null,
        "dependencies": [],
        "tags": ["encryption", "aes", "security"],
        "install_source": "registry",
        "install_at": "2025-11-09T16:20:00Z",
        "installed_by": "admin",
        "created_at": "2025-11-09T16:20:00Z",
        "updated_at": "2025-11-09T16:20:00Z"
      }
    },
    {
      "scenario": "场景3: 运行出错的验证插件",
      "description": "插件启动失败或运行时崩溃,处于错误状态",
      "data": {
        "id": 3,
        "name": "json-validator-plugin",
        "display_name": "JSON 验证插件",
        "description": "基于 JSON Schema 验证数据格式",
        "version": "1.5.2",
        "author": "data-team",
        "type": "validation",
        "protocol": "grpc",
        "binary_path": "/opt/plugins/json-validator",
        "checksum": "c5f7e0d1a4b6c3e2d9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2",
        "file_size": 4194304,
        "status": "error",
        "enabled": true,
        "auto_start": true,
        "process_id": null,
        "last_start_at": "2025-11-11T12:00:00Z",
        "last_stop_at": "2025-11-11T12:00:05Z",
        "restart_count": 5,
        "error_message": "plugin crashed: panic: runtime error: invalid memory address or nil pointer dereference",
        "config": {
          "strict_mode": true,
          "allow_additional_properties": false
        },
        "capabilities": {
          "draft04": true,
          "draft07": true,
          "draft2019": false
        },
        "metadata": {
          "bug_tracker": "https://github.com/example/json-validator/issues"
        },
        "protocol_version": 1,
        "handshake_cookie": "json-validator-xyz789",
        "total_calls": 892,
        "failed_calls": 156,
        "avg_response_ms": 15.2,
        "last_call_at": "2025-11-11T11:59:58Z",
        "dependencies": [],
        "tags": ["validation", "json", "schema"],
        "install_source": "url",
        "install_at": "2025-11-05T14:30:00Z",
        "installed_by": "developer",
        "created_at": "2025-11-05T14:30:00Z",
        "updated_at": "2025-11-11T12:00:05Z"
      }
    },
    {
      "scenario": "场景4: 正在安装中的数据转换插件",
      "description": "插件正在下载或安装,尚未完成",
      "data": {
        "id": 4,
        "name": "xml-to-json-plugin",
        "display_name": "XML 转 JSON 插件",
        "description": "将 XML 格式转换为 JSON 格式",
        "version": "3.0.0-beta",
        "author": "transform-team",
        "type": "transform",
        "protocol": "grpc",
        "binary_path": "/tmp/plugins/installing/xml-to-json",
        "checksum": "",
        "file_size": 0,
        "status": "installing",
        "enabled": false,
        "auto_start": false,
        "process_id": null,
        "last_start_at": null,
        "last_stop_at": null,
        "restart_count": 0,
        "error_message": "",
        "config": {},
        "capabilities": {},
        "metadata": {
          "download_progress": "65%"
        },
        "protocol_version": 1,
        "handshake_cookie": "",
        "total_calls": 0,
        "failed_calls": 0,
        "avg_response_ms": 0,
        "last_call_at": null,
        "dependencies": [],
        "tags": ["transform", "xml", "json"],
        "install_source": "registry",
        "install_at": null,
        "installed_by": "admin",
        "created_at": "2025-11-11T14:00:00Z",
        "updated_at": "2025-11-11T14:05:30Z"
      }
    },
    {
      "scenario": "场景5: 有依赖关系的复杂自定义插件",
      "description": "一个依赖其他插件的自定义插件,使用 net-rpc 协议",
      "data": {
        "id": 5,
        "name": "data-pipeline-plugin",
        "display_name": "数据管道插件",
        "description": "组合多个插件实现完整的数据处理流水线:验证 -> 脱敏 -> 加密 -> 转换",
        "version": "2.5.0",
        "author": "platform-team",
        "type": "custom",
        "protocol": "net-rpc",
        "binary_path": "/opt/plugins/data-pipeline",
        "checksum": "d6e8f1a2b5c7d4e3f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3",
        "file_size": 12582912,
        "status": "active",
        "enabled": true,
        "auto_start": true,
        "process_id": 54321,
        "last_start_at": "2025-11-11T08:00:00Z",
        "last_stop_at": "2025-11-10T22:00:00Z",
        "restart_count": 1,
        "error_message": "",
        "config": {
          "pipeline_stages": ["validate", "desensitize", "encrypt", "transform"],
          "parallel_processing": true,
          "max_workers": 10,
          "timeout": 60
        },
        "capabilities": {
          "streaming": true,
          "batch_processing": true,
          "async_mode": true
        },
        "metadata": {
          "performance_tier": "high",
          "sla": "99.9%"
        },
        "protocol_version": 1,
        "handshake_cookie": "pipeline-token-def456",
        "total_calls": 45678,
        "failed_calls": 234,
        "avg_response_ms": 125.8,
        "last_call_at": "2025-11-11T14:30:00Z",
        "dependencies": [
          "json-validator-plugin",
          "desensitization-plugin",
          "aes-encryption-plugin",
          "xml-to-json-plugin"
        ],
        "tags": ["pipeline", "workflow", "automation", "enterprise"],
        "install_source": "local",
        "install_at": "2025-11-01T10:00:00Z",
        "installed_by": "system",
        "created_at": "2025-11-01T10:00:00Z",
        "updated_at": "2025-11-11T08:00:00Z"
      }
    },
    {
      "scenario": "场景6: 已禁用的旧版本插件",
      "description": "插件被主动禁用,可能是因为有新版本或不再需要",
      "data": {
        "id": 6,
        "name": "legacy-hash-plugin",
        "display_name": "MD5 哈希插件 (已废弃)",
        "description": "提供 MD5 哈希功能,已被更安全的 SHA-256 插件替代",
        "version": "0.9.0",
        "author": "legacy-team",
        "type": "encryption",
        "protocol": "net-rpc",
        "binary_path": "/opt/plugins/legacy/md5-hash",
        "checksum": "e7f9a0b1c6d8e5f4a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4",
        "file_size": 2097152,
        "status": "disabled",
        "enabled": false,
        "auto_start": false,
        "process_id": null,
        "last_start_at": "2025-10-15T10:00:00Z",
        "last_stop_at": "2025-10-15T18:00:00Z",
        "restart_count": 0,
        "error_message": "",
        "config": {
          "deprecated": true,
          "replacement": "sha256-plugin"
        },
        "capabilities": {
          "md5": true,
          "sha1": true
        },
        "metadata": {
          "deprecation_date": "2025-10-15",
          "end_of_life": "2025-12-31"
        },
        "protocol_version": 1,
        "handshake_cookie": "",
        "total_calls": 123456,
        "failed_calls": 45,
        "avg_response_ms": 2.3,
        "last_call_at": "2025-10-15T17:59:59Z",
        "dependencies": [],
        "tags": ["deprecated", "legacy", "hash"],
        "install_source": "registry",
        "install_at": "2024-05-20T10:00:00Z",
        "installed_by": "admin",
        "created_at": "2024-05-20T10:00:00Z",
        "updated_at": "2025-10-15T18:00:00Z"
      }
    }
  ],
  "说明": {
    "索引使用场景": {
      "idx_type_status": "快速查询某种类型且处于特定状态的插件,如: WHERE type='desensitization' AND status='active'",
      "idx_enabled_status": "快速查询已启用且正在运行的插件,如: WHERE enabled=true AND status='active'",
      "idx_name_version": "快速查询特定版本的插件,如: WHERE name='desensitization-plugin' AND version='1.0.0'"
    },
    "常见查询示例": [
      {
        "场景": "获取所有正在运行的插件",
        "SQL": "SELECT * FROM plugin_store WHERE status = 'active' AND enabled = true"
      },
      {
        "场景": "查找特定类型的所有激活插件",
        "SQL": "SELECT * FROM plugin_store WHERE type = 'desensitization' AND status = 'active'"
      },
      {
        "场景": "获取出错的插件列表",
        "SQL": "SELECT name, version, error_message FROM plugin_store WHERE status = 'error'"
      },
      {
        "场景": "查找需要重启的插件(重启次数超过阈值)",
        "SQL": "SELECT * FROM plugin_store WHERE restart_count > 3 AND enabled = true"
      },
      {
        "场景": "获取性能最差的插件(平均响应时间最长)",
        "SQL": "SELECT name, avg_response_ms, total_calls FROM plugin_store WHERE status = 'active' ORDER BY avg_response_ms DESC LIMIT 10"
      },
      {
        "场景": "查找未使用的插件(从未被调用)",
        "SQL": "SELECT * FROM plugin_store WHERE total_calls = 0 AND status != 'installing'"
      }
    ],
    "字段说明": {
      "process_id": "只有 status='active' 时才会有值,表示当前运行的进程 ID",
      "restart_count": "统计插件重启次数,可用于判断插件稳定性",
      "avg_response_ms": "使用指数移动平均(EMA)计算,权重为 0.9:0.1",
      "dependencies": "数组存储依赖的其他插件名称,安装/启动时需要检查依赖是否满足",
      "config": "JSONB 类型,存储插件特定的配置参数",
      "capabilities": "JSONB 类型,描述插件提供的功能",
      "metadata": "JSONB 类型,存储任意元数据信息"
    }
  }
}
